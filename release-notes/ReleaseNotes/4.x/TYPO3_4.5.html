<h1 id="typo3-4.5-lts-technical-release-notes">TYPO3 4.5 LTS Technical Release Notes</h1>
<p>This document contains information about TYPO3 version 4.5 which was released on January, 26th 2011.</p>
<h2 id="system-requirements">System Requirements</h2>
<p>The system requirements are the same as 4.4:</p>
<ul>
<li>PHP 5.2.x-5.3.x</li>
<li>MySQL 5.0.x-5.1.x</li>
</ul>
<h2 id="installing">Installing</h2>
<h3 id="upgrading">Upgrading</h3>
<p>Download the packages from the <a href="https://typo3.org/download/">download package page at typo3.org</a>.</p>
<p>To upgrade an existing installation of 4.4 to 4.5, please follow these steps:</p>
<ul>
<li>Visit the Install Tool:</li>
</ul>
<ol style="list-style-type: decimal">
<li><ol style="list-style-type: decimal">
<li>Run through “Update wizards” which are new in 4.5 (you can now go through them using the “Next” button)</li>
<li>Use the “Database COMPARE” section and apply all database schema changes.</li>
</ol></li>
</ol>
<h3 id="new-installations">New installations</h3>
<p>Try out the <strong>introduction package(<a href="http://prdownloads.sourceforge.net/typo3/introductionpackage-4.5.0.tar.gz?download">tar.gz</a>) (<a href="http://prdownloads.sourceforge.net/typo3/introductionpackage-4.5.0.zip?download">zip</a>)</strong> which provides a very easy way of installing TYPO3 and having some example setup already in place.</p>
<h3 id="compatibility">Compatibility</h3>
<p><strong>safe_mode</strong></p>
<p>We still support safe_mode in TYPO3 4.5, but won't be able to fix further bugs related to safe_mode being enabled (e.g. image generation). System Requirements for TYPO3 4.6 will (most probably) be PHP 5.3 and safe_mode <strong>disabled</strong>. Thus users wanting to upgrade to 4.6 (End of 2011) will have to make sure safe_mode is off, else they can still stick to 4.5 (with LTS) for the next three years.</p>
<p><strong>Apache</strong></p>
<p>Please note that TYPO3 automatically generates a .htaccess file in typo3temp/compressed/ which speeds up the loading of the backend while using Apache. It sets an <code>Expires</code> and requires Apache to be able to set this through an <code>.htaccess</code>. If you get errors or do not want this feature, please consider turning it off:</p>
<p><code>$TYPO3_CONF_VARS['SYS']['generateApacheHtaccess'] = 0</code></p>
<p><strong>Mail Sending</strong></p>
<p>Starting with this release, TYPO3 provides a unified and RFC compliant API to send emails. This also presents new settings (through the Install Tool &gt; All Configuration, in the [MAIL] section) allowing the site admin to decide through which transport mechanism emails generated by TYPO3 core and extensions should be handled: send via PHP's “mail()” or directly through SMTP or sendmail, or just written to a text file.</p>
<p>The release team was in contact with the author of major mail sending extensions (Direct Mail, Powermail, Mailhandler) and all will release newer versions soon after 4.5 is out. Since not all extensions will start using this new API from start, a compatibility layer is provided. This layer might prove not to work correctly if the extension tried to provide MIME encoding on its own. So if you are unsure about it or if you get destroyed mails, consider setting this compatibility layer off (with the drawback of not being able to configure the transport anymore for those pre-4.5 extensions):</p>
<p><code>$TYPO3_CONF_VARS['MAIL']['substituteOldMailAPI'] = 0</code></p>
<h1 id="changes-and-improvements">Changes and improvements</h1>
<p>This will list all changes and improvements between TYPO3 4.4 and 4.5. For technical details see ChangeLog included in the typo3_src package.</p>
<h2 id="general">General</h2>
<p><strong>HTML5 new TYPO3 Backend doctype</strong>: This allows the Core and also Extensions to make use of newer browser features. Of course we will still maintain compatibility with IE6, having some graceful fallback where necessary (by using <a href="http://www.modernizr.com/">Modernizr</a> to detect CSS3 capabilities).</p>
<p><strong>UTF8 by default</strong>: New installations will use UTF8 automatically. Keep in mind that we will be deprecating all other charsets in the release of 4.5, but <strong>still support</strong> those charsets. 4.7 or maybe even 4.6 will be the first “UTF-8 only” release. When upgrading from older releases to 4.5, you will have to specifically set <code>$TYPO3_CONF_VARS['BE']['forceCharset']</code> and <code>$TYPO3_CONF_VARS['BE']['setDBinit']</code> in your localconf.php. An Upgrade Wizard will help you with that.</p>
<p>Usage of <strong>ImageMagick 4 and 5</strong> is deprecated: With 4.5 (and in the long term support) we will still support that ancient versions, but will drop support for it starting in 4.6 already. This will enable us to fix bugs in the graphical engine faster and to add new features to it more efficiently.</p>
<h3 id="workspaces">Workspaces</h3>
<p>We proudly present the <strong>new Workspace Module</strong>, completely based on ExtJS and powered by Extbase / Fluid (the first core backend module to use this framework). All Workspace improvements were made by a dedicated <a href="https://forge.typo3.org/projects/typo3v4-workspaces">Workspaces team</a>.</p>
<ul>
<li>A Workspace can now implement custom stages to allow more flexible reviewing setups.</li>
<li>The default “draft workspace” is now obsolete and will be migrated to a real workspace by an Upgrade Wizard.</li>
<li>Inline Relational Record Editing (IRRE) finally works in Workspaces.</li>
<li>There is a new Scheduler task for the automatic publication of workspaces. This replaces the non-working CLI script “typo3/mod/user/ws/cli/ws_cli.phpsh” (which was removed).</li>
</ul>
<h3 id="mail-api">Mail API</h3>
<p>A whole new mail API based on SwiftMailer was added to replace t3lib_htmlmail. t3lib_htmlmail won't be removed; it is just marked as “deprecated”.</p>
<p>With this new Mail API some configuration options were introduced, which allow the administrator to configure how mails should be send (setting <code>$TYPO3_CONF_VARS['MAIL']['transport']</code>):</p>
<ul>
<li><em>mail</em>: default and backwards compatible setting. This is the most unreliable option. If you are serious about sending mails, consider using “smtp” or “sendmail”.</li>
<li><em>smtp</em>: Sends messages over SMTP. It can deal with encryption and authentication. Requires a mail server. Works exactly the same on Windows, Unix and MacOS.</li>
<li><em>sendmail</em>: Sends messages by communicating with a locally installed MTA - such as sendmail.</li>
<li><em>mbox</em>: This doesn't send any mail out, but instead will write every outgoing mail to a file.</li>
</ul>
<p>The new mail API can be configured to hook itself directly into t3lib_utility_mail::mail(), which means that all mail sending that uses that API (especially extensions) will use the new settings.</p>
<h3 id="linkvalidator">Linkvalidator</h3>
<p>A new <strong>Linkvalidator module</strong> was added as a new system extension. It is able to check all kinds of links: internal, external and file links. It looks inside headers, bodytext and other configured fields. It comes with a just-in-time checker and is also able to do the checks via a scheduler task. Development of this module is done through the <a href="https://forge.typo3.org/projects/extension-linkvalidator">Linkvalidator team</a>.</p>
<h3 id="new-extension-manager-em">New Extension Manager (EM)</h3>
<p>This module is a brand new all-in-one Extension Manger based on an ExtJS UI.</p>
<p>The whole EM extension was completely refactored while keeping all the functionality of the existing EM. A new optional UI based on ExtJS and ExtDirect was added (Function Menu “Extension Manager” in the EM), which provides a smooth way for new users to manage the extensions.</p>
<p>Amongst the known features it comes with a couple of new possibilities:</p>
<ul>
<li>Manage your extensions from TER through the Extension Managers UI (create / delete / transfer extensions keys). Needs to be enabled in the “em” extension configuration.</li>
<li>Support for multiple TER repositories: Create your own repository and be able to maintain your private extensions through the new EM. This is a nice feature also for agencies which maintain lots of custom extensions.</li>
</ul>
<p>A new task was added (scheduler) to update the list of available extensions from TER regularly.</p>
<h3 id="other-general-improvements">Other general improvements</h3>
<p>Added <strong>Khmer language</strong> (Cambodian).</p>
<p>An improved version of <em>“_.htaccess”</em> (former misc/advanced.htaccess) provides more accurate and up-to-date information and is a real working sample on how to setup your Apache to serve TYPO3 pages. This setup is now also used in the introduction and dummy packages.</p>
<p>Added an easy way to create news that are displayed below the login form in the /typo3 login screen. Just create records of type “System News” in your root folder.</p>
<p>When TYPO3 runs with two different domain names for the FE and the BE, it is now possible to set accordingly different cookie domains using <code>$TYPO3_CONF_VARS['FE']['cookieDomain']</code> and <code>$TYPO3_CONF_VARS['BE']['cookieDomain']</code>.</p>
<p>The media element now has a core wizard for rewriting URLs. This allows the user to copy the URL from browser (e.g. a youtube URL like <a href="http://www.youtube.com/watch?v=pkA9qw80xO0" class="uri">http://www.youtube.com/watch?v=pkA9qw80xO0</a>) and use it as URL in the media element. Currently supported platforms: youtube, dailymotion, sevenload, vimeo, clipfish, google, metacafe, myvideo, liveleak and veoh. This is the result of a Google Summer of Code student's work.</p>
<h2 id="backend">Backend</h2>
<h3 id="frameset-is-gone-new-pagetree">Frameset is gone / New Pagetree</h3>
<p>The frameset which used to lay out the backend was removed. The new backend works using the <strong>ExtJS viewport</strong>, providing an easy, fast and unified interface to manipulate the content of the different panels. See this <a href="http://buzz.typo3.org/people/steffen-kamper/article/backend-navigation-in-typo3-45/">buzz article</a> for some technical details on how this works. As a side effect, the navigation tree can be resized at will.</p>
<ul>
<li><a href="http://buzz.typo3.org/people/steffen-kamper/article/backend-navigation-in-typo3-45/">Read more about debugging the new view panel</a></li>
</ul>
<p>Adding to that we have a brand <strong>New Pagetree</strong> based on ExtJS / ExtDirect and a new powerful API for “trees” and “context menus”.</p>
<ul>
<li><a href="https://wiki.typo3.org/Pagetree">Read more about the new pagetree and context menus</a></li>
</ul>
<h3 id="grid-view-backend-layout">Grid view / Backend layout</h3>
<p>The <strong>Backend Layout Wizard</strong> enables the layout of the well known “Columns” View (Web&gt;Page) to be adapted to the frontend look and feel. This feature was a development from the T3UXW09 and was finished for 4.5. To use this feature, create records of type “Backend layout” in a Folder, using the available Wizard to create the grid you want. Then go to the Web&gt;Page module as usual and select the Grid for your page. There is a <a href="http://www.youtube.com/watch?v=SsxfNd4TYbk">video demonstrating it in action</a></p>
<ul>
<li><a href="https://typo3.org/news/article/the-grid-view-a-new-concept-for-a-backend-that-matches-your-layout/">Read more about the grid view</a></li>
</ul>
<h3 id="live-search">Live search</h3>
<p>Added a <strong>Live search</strong> with auto-complete / suggest to replace the old “search box”. This is also a result from the T3UXW09 which was finished during the 4.5 development phase.</p>
<h3 id="rtehtmlarea">RTEhtmlarea</h3>
<p>Development of RTEhtmlarea didn't stop and there are tons of nice new features and fixes in this new release. Amongst them:</p>
<ul>
<li>New option “paste as plaintext”. When the toggle is ON, any paste action is intercepted and clipboard content is pasted as plain text. A “Clean paste” feature allows the user to paste content “unformatted”, “structure only” or “fully blown”.</li>
<li>Added option in the RemoveFormat plugin to remove typographical punctuation, which might come from Copy&amp;Paste from MS-Word.</li>
<li>Added a general element properties editing dialogue, where you can add “id”, “name”, “lang” and other universal attributes to any tag in your content.</li>
</ul>
<h3 id="other-improvements-to-the-backend">Other improvements to the Backend</h3>
<p>“Create multiple pages” Wizard improved: The user can decide the type of each page created, and it allows to create more than 9 pages at once.</p>
<p><strong>t3editor</strong> now also enables syntax highlighting when editing files in fileadmin, for example when editing HTML, PHP, SQL, XML files. We also updated the underlying codemirror to the latest version (0.9) which is also used in the new extension manager (local extension, Tab “Files”).</p>
<p>Pages of type “Shortcut” can now also link to the parent page, not only to the first or a random subpage.</p>
<p>SysFolder was renamed to just “Folder”: We don't have any other “Folder type”, so this change was done to improve usability for first time users. A Folder can contain any type of record.</p>
<p>Page module will provide a direct link to the list module when accessing Folders.</p>
<p>Allow adding query parameters (&amp;...) to internal links (e.g. in fields with browse_links and images). This used to be a feature of RTEhtmlarea links only and is now available on every link wizard.</p>
<p>The former “Shortcuts” feature (in the toolbar, where one could make shortcuts to different backend modules and pages) was renamed to “Bookmarks” to avoid the confusion with the “Page Shortcuts”. This change was also reflected in UserTS options (See #16252).</p>
<p>Old modules from typo3/mod were moved to real system extensions. These modules are:</p>
<ul>
<li>Extension Manager (required)</li>
<li>List module (required)</li>
<li>Filelist module</li>
<li>Info module</li>
<li>Access module</li>
<li>Workspace module</li>
</ul>
<p>Make sure you <strong>visit the Update Wizard</strong> to enable those extensions after upgrading to 4.5.</p>
<p>DB check -&gt; page tree submodule was removed (module lowlevel) because of its uselessness.</p>
<p>“Clearing cache” now is logged to the Admin Tools &gt; Log.</p>
<p>A hook now allows postprocessing of filelist and TCEforms files operations (#15192 and #15221). Typical use-cases:</p>
<ul>
<li>Allow editors to upload any picture (e.g., 10 Mpixels) as they don't know how to resize the pictures or do not have the software</li>
<li>Prevent fileadmin to be overflooded with huge pictures which will never be used in their original size</li>
<li>Automatically resize “huge” pictures after the upload. Extension using it already: <a href="https://forge.typo3.org/projects/show/extension-image_autoresize">image_autoresize</a></li>
</ul>
<p>New TS config option to disable the “Show secondary options” checkbox. In User-TS, you can set: <code>options.enableShowPalettes=0</code> to see this feature in action. Default is still “1” like it used to be.</p>
<p>When copying or translating content elements, the copy / translation will now default to be “hidden”. This eases work of translators, in that the “[Translate to language]” elements do not appear in the frontend right away. In order for editors not to loose track of copied elements the default for the checkbox “show hidden elements” is now <strong>on</strong>. This behaviour can be modified by adding this to typo3conf/extTables.php:</p>
<p><code>$TCA['tt_content']['ctrl']['hideAtCopy'] = FALSE;</code></p>
<p>A new condition is available for the current page record in PageTS. This allows settings for example like this:</p>
<p><code>mod.SHARED.colPos_list = 0</code><br />
<code>[page|layout = 1]</code><br />
<code>mod.SHARED.colPos_list = 1,0</code><br />
<code>[global]</code></p>
<h2 id="skin-backend-ui">Skin / Backend UI</h2>
<h3 id="extjs-and-our-skin">ExtJS and our Skin</h3>
<p>We updated ExtJS used by the backend to version 3.3.1. Our skin was improved to provide more support for common ExtJS components and the look and feel of them was greatly adapted by our Design &amp; Usability Team.</p>
<ul>
<li>ExtJS Grids, Tabs and Buttons are now styled the “TYPO3-way”.</li>
<li>The recycler was refactored and has uses the same skin as the rest of the BE.</li>
<li>The new Workspaces module includes other components which now have a common styling.</li>
<li>The whole core now uses a new style of windows and dialogs (with lightbox effect) in the backend (TYPO3.Window and TYPO3.Dialog).</li>
</ul>
<h3 id="usability-of-editing-forms">Usability of Editing Forms</h3>
<p>The “Pages” and “Content Element” forms were completely rearranged and got new and more useable labels. This is also a result from the T3UXW09. During this project we also improved the usability of the “clear field” checkbox (now inside the input area on mouse-over). The same checkbox used to select the default date on a date field, this can now be done in the popup calendar (ExtJS based, which now also correctly supports TCA date ranges).</p>
<p>A new CSH API was introduced and is being used throughout the core. There are no longer CSH icons in the forms. Instead the CSH opens as (ExtJS based) tooltips when hovering over the labels.</p>
<ul>
<li><a href="https://wiki.typo3.org/TCEformsRecommendedLayout">Read more about the rules for the usability rearrangement</a>, interesting for extension developers who want to provide a consistency.</li>
</ul>
<h3 id="sprites">Sprites</h3>
<p>A <strong>sprite generator</strong> was added. This allows you to create your own sprite files, also core can generate the files if some new icons were added. The core is now able to auto-generate sprites from icons if configured to do so. Default setup is to use the available sprites that ship with TYPO3. Using this handler you can advise the SpriteManager to create a sprite out of all custom icons (shipped via extensions), and use this one for displaying custom icons (speeding up the backend). This works transparently: extension developers can continue using “single” icons. Set:</p>
<p><code>$TYPO3_CONF_VARS['BE']['spriteIconGenerator_handler'] = 't3lib_spritemanager_SpriteBuildingHandler'</code></p>
<p>TCEforms now also uses the sprites in a lot more places, providing more consistent icons matching our skin.</p>
<h3 id="other-improvements-in-the-skin-backend-ui">Other Improvements in the Skin / Backend UI</h3>
<p>Lots of improvements in the Skin were made possible by the <a href="https://forge.typo3.org/projects/skin">Skin team</a>, formed during the 4.5 development phase. Styling of the new workspace module, ExtJS components, new backend structure with added contrast (and drop shadows) between the areas styled page. Plenty of optimizations to backend skin to have a more consistent look and feel and converge more towards the Phoenix (TYPO3v5) development.</p>
<p>The frontend Admin Panel was styled and has a nice look and feel now (and more fitting to the new backend skin).</p>
<p>Added current flags from famfam in t3skin in a nice sprite. This means you can now choose between much more flags for your sys_languages. Be sure to visit the “Upgrade Wizard” to make the necessary DB changes in your existing sys_language (strips the .gif from flag names).</p>
<p>Access Lists settings in be_groups configuration are now rendered as checkboxes providing a more useable way of manipulating this huge list of options.</p>
<h2 id="administration-customization">Administration / Customization</h2>
<p>TypoScript included from files (via <INCLUDE_TYPOSCRIPT ...>) can now be edited directly through the backend in the t3editor.</p>
<p>Scheduler: The cron syntax interpreter of the Scheduler was entirely refactored. It now supports the full range of cron syntax features as can be found in Unix manual pages.</p>
<p>Individual <strong>FlexForms fields</strong> can now be enabled / disabled via TSConfig and group access lists.</p>
<ul>
<li>In the configuration module the array keys are now sorted alphabetically.</li>
<li>Checkbox at the bottom of the modules are now hideable to provide a cleaner interface:
<ul>
<li>New User TSconfig options: <code>options.file_list.enableDisplayBigControlPanel</code>, <code>options.file_list.enableDisplayThumbnails</code>, <code>options.file_list.enableClipBoard</code></li>
<li>New Page TSconfig options: <code>mod.web_list.enableDisplayBigControlPanel</code>, <code>mod.web_list.enableClipBoard</code>, <code>mod.web_list.enableLocalizationView</code></li>
</ul></li>
</ul>
<h3 id="install-tool">Install tool</h3>
<p>We now have a better API for Update Wizards in the Install Tool. This also makes the Wizards accessible one after the other (with “Next” buttons). To avoid installing TYPO3 on a system that doesn't match the requirements, a pre-check for required php-extensions was added to the 1-2-3 installer.</p>
<p>The Install Tool used to silently fail when there was an error in some statement of the DB “COMPARE”. Now these errors are reported in the returned form.</p>
<h2 id="development">Development</h2>
<h3 id="extbase-fluid">Extbase / Fluid</h3>
<p>Extbase, the MVC bridge between TYPO3 Phoenix' framework FLOW3 and TYPO3 v4 as well as the new templating engine Fluid are steadily improved with every new version of TYPO3 4.x.</p>
<p>Extbase now supports <a href="https://forge.typo3.org/projects/typo3v4-mvc/wiki/Dependency_Injection_%28DI%29">Dependency Injection</a>, which is one of the building blocks of FLOW3. It helps you to build loosely-coupled systems more easily and allows you to gain experience with another FLOW3 concept in your daily life.</p>
<p>In TYPO3 4.5 LTS, Fluid can be used from TypoScript using the new <a href="https://forge.typo3.org/projects/typo3v4-mvc/wiki/FLUIDTEMPLATE_Content_Object">FLUIDTEMPLATE content object</a>. This means you can now use Fluid Templates not only for Extensions, but also for the website itself. Furthermore, support for <a href="https://forge.typo3.org/projects/typo3v4-mvc/wiki/Fluid_Widgets">Widgets</a> has been added, meaning you can add page browsing or Ajax autocompletion with a single line in your Fluid template.</p>
<p>There are many more smaller features, and many issues have been tackled, making this the most stable Extbase release ever.</p>
<p>Although we do our best to make adjustments in a backwards-compatible manner, we needed to break backwards compatibility at a few places. In order to see if you are affected and how the issues can be solved, please read our <a href="https://forge.typo3.org/projects/typo3v4-mvc/wiki/Breaking_Changes">notes on breaking changes</a>.</p>
<ul>
<li><a href="http://buzz.typo3.org/teams/core/article/typo3-45-lts-extbase-and-fluid-features-and-improvements/">Read more about the Extbase / Fluid changes</a></li>
</ul>
<h3 id="backend-development">Backend Development</h3>
<p>Generic notification methods to show windows and dialogs in the backend based on ExtJS. Just access them via JS via TYPO3.Window and TYPO3.Dialog.</p>
<p>A new view panel (debug console) appears the lower side of the backend in development mode. It displays any call to debug() by BE modules, any thrown ExtDirect Exceptions, and even debug() calls inside ExtDirect calls. It also catches and displays any console-calls from Javascript.</p>
<p>ExtDirect is available in the frontend now.</p>
<ul>
<li><a href="https://wiki.typo3.org/ExtDirect">Read more about ExtDirect in TYPO3</a></li>
</ul>
<p>A new mode was added to debug the backend with <code>$TYPO3_CONF_VARS['BE']['debug'] = '1';</code> it disables the login refresh ajax call and instructs the page renderer not to merge the loaded javascript and CSS files, easing debugging with tools like Firebug.</p>
<h3 id="extension-development">Extension Development</h3>
<p>Rendering of backend modules got easier, using the PageRenderer's new facility method “render()”.</p>
<p>There is a new setting that shows all SQL queries in debug mode: <code>$TYPO3_CONF_VARS['SYS']['sqlDebug'] = 2;</code>.</p>
<p>Based on the new tree API we have a new feature called “TCA trees”. For example add this to your typo3conf/extTables.php and see it in action in the “Pages” settings (check the fields Access Usergroups and “General record storage”):</p>
<p><code>$GLOBALS['TCA']['pages']['columns']['fe_group']['config']['renderMode'] = 'tree';</code><br />
<code>$GLOBALS['TCA']['pages']['columns']['fe_group']['config']['treeConfig'] = array(</code><br />
<code>    'expandAll' =&gt; true,</code><br />
<code>    'parentField' =&gt; 'subgroup'</code><br />
<code>);</code></p>
<p><code>$GLOBALS['TCA']['pages']['columns']['storage_pid']['config']['type'] = 'select';</code><br />
<code>$GLOBALS['TCA']['pages']['columns']['storage_pid']['config']['renderMode'] = 'tree';</code><br />
<code>$GLOBALS['TCA']['pages']['columns']['storage_pid']['config']['treeConfig'] = array(</code><br />
<code>    'parentField' =&gt; 'pid'</code><br />
<code>);</code><br />
<code>$GLOBALS['TCA']['pages']['columns']['storage_pid']['config']['foreign_table'] = 'pages';</code><br />
<code>$GLOBALS['TCA']['pages']['columns']['storage_pid']['config']['foreign_table_where'] = ' ORDER BY pages.sorting ASC';</code><br />
<code>$GLOBALS['TCA']['pages']['columns']['storage_pid']['config']['size'] = 10;</code></p>
<p>CSH for FlexForms is handled more cleanly but requires adjustments. This has an impact in particular for FE plugins. To continue displaying the CSH for their FlexForm, the CSH file must be declared as for other elements, i.e.</p>
<p><code>t3lib_extMgm::addLLrefForTCAdescr('somekey', 'EXT:myext/locallang_csh.xml');</code></p>
<p>For more details, in particular how the key is defined, see this <a href="http://buzz.typo3.org/teams/core/article/getting-ready-for-45-changes-in-csh-for-flexforms/">article on buzz</a>.</p>
<h3 id="typoscript-frontend">TypoScript / Frontend</h3>
<ul>
<li>Added easy interface to integrate lightbox style image enlargement in the frontend. Just set the constants in the “CONTENT” part of css_styled_content and your images will get attributes added that are needed for lightbox JS frameworks to work out of the box.</li>
</ul>
<!-- -->
<ul>
<li>New TypoScript features:
<ul>
<li>Implemented <strong>stdWrap in all properties</strong> of all cObjects to enhance flexibility</li>
<li>stdWrap now has property <strong>.numberFormat</strong></li>
<li>GIFBUILDER has a new object type <strong>ELLIPSE</strong></li>
<li>New content object “FLUIDTEMPLATE” allowing to use the coolness of fluid templates to build TYPO3 websites (instead of using markers / subparts)</li>
<li>New content object “SVG” which works on all browsers. It uses <a href="http://code.google.com/p/svgweb/">svgweb library</a> to provide cross-browser support</li>
<li>New property <strong>.noRescale</strong> for IMG_RESOURCE, allowing to provide unscaled high resolution images, useful for example when transforming the rendered HTML into a PDF</li>
<li>matchCondition now also recognizes iOS and Android.</li>
</ul></li>
</ul>
<!-- -->
<ul>
<li>A new option to force SSL on a page base was added, a functionality which was previously only available through extensions.</li>
<li>Added support for <strong>RDFa doctype</strong> headers (semantic web)</li>
</ul>
<h3 id="database-api-dbal">Database API / DBAL</h3>
<ul>
<li>Prepared queries* are now part of the TYPO3 database API. The API is mostly based on PDO's method naming and currently supports SELECT queries. TYPO3 will progressively use this new database API which is cleaner and quicker when using DBAL. Extension authors are encouraged to use it in their own extensions.</li>
</ul>
<!-- -->
<ul>
<li><a href="http://buzz.typo3.org/teams/core/article/typo3-45-lts-prepared-queries-are-the-way-to-go/">Read more about prepared SQL queries</a></li>
</ul>
<p>To speed up operation when DBAL is activated, output of SQL parser when dealing with prepared queries is cached. To activate this caching if you don't have a memcached server:</p>
<p><code>$TYPO3_CONF_VARS['SYS']['useCachingFramework'] = 1;</code></p>
<p>In order to have a much higher cache hit ratio, you should use one or more memcached servers. To activate this enhanced caching, use:</p>
<p><code>$TYPO3_CONF_VARS['SYS']['useCachingFramework'] = 1;</code><br />
<code>$TYPO3_CONF_VARS['SYS']['caching']['cacheConfigurations']['dbal'] = array(</code><br />
<code>    'backend' =&gt; 't3lib_cache_backend_MemcachedBackend',</code><br />
<code>    'options' =&gt; array(</code><br />
<code>        'servers' =&gt; array('localhost:11211', 'otherhost:11211'),</code><br />
<code>    )</code><br />
<code>);</code></p>
<h2 id="security">Security</h2>
<p>Introduced a <strong>form protection API</strong> to avoid “Cross Site Request Forgery” attacks. See <a href="http://buzz.typo3.org/teams/security/article/typo3-45-will-be-the-most-secure-typo3-version-ever/">notes from the Security Team</a> about this new feature.</p>
<p>After introducing a protection, all extensions that provide backend modules using alt_doc.php, tce_db.php or tce_file.php need to provide a token in the URL or the form. This can be done by using the following code:</p>
<ul>
<li>alt_doc.php*</li>
</ul>
<p><code>t3lib_TCEforms::getHiddenTokenField('editRecord'); </code><br />
<code>// or </code><br />
<code>t3lib_BEfunc::getUrlToken('editRecord');</code></p>
<ul>
<li>tce_db.php*</li>
</ul>
<p><code>t3lib_TCEforms::getHiddenTokenField('tceAction'); </code><br />
<code>// or </code><br />
<code>t3lib_BEfunc::getUrlToken('tceAction');</code></p>
<ul>
<li>tce_file.php*</li>
</ul>
<p><code>t3lib_TCEforms::getHiddenTokenField('tceFileAction'); </code><br />
<code>// or </code><br />
<code>t3lib_BEfunc::getUrlToken('tceFileAction');</code></p>
<p>A new task (scheduler) for bulk update of passwords for use with saltedpasswords (#16360)</p>
<h2 id="performance">Performance</h2>
<p><strong>Caching Framework</strong></p>
<p>Added option to compress data in DbBackend of the Caching framework. This will speed up your caching especially if the database server is accessed through a network. Enable it like this:</p>
<p><code>$TYPO3_CONF_VARS['SYS']['caching']['cacheConfigurations']['cache_pages'] = array(</code><br />
<code>       'frontend' =&gt; 't3lib_cache_frontend_VariableFrontend',</code><br />
<code>       'backend' =&gt; 't3lib_cache_backend_DbBackend',</code><br />
<code>       'options' =&gt; array(</code><br />
<code>           'cacheTable' =&gt; 'cachingframework_cache_pages',</code><br />
<code>           'tagsTable' =&gt; 'cachingframework_cache_pages_tags',</code><br />
<code>           'compression' =&gt; TRUE,</code><br />
<code>       ),</code><br />
<code>   );</code></p>
<p>The API for registering additional cache frontends or backends has changed. As of TYPO3 4.5 only the classname needs to be specified in favor of both path to the php file and the classname. Instead the class needs to be registered for autoloading. See #15586 for details. Example:</p>
<p>New:</p>
<p><code>$TYPO3_CONF_VARS['SYS']['caching']['cacheFrontends']['myext']='tx_myext_cache';</code></p>
<p>Old:</p>
<p><code>$TYPO3_CONF_VARS['SYS']['caching']['cacheFrontends']['myext']='/path/tx_myext_cache.php:tx_myext_cache';</code></p>
<p>A new scheduler task was added to execute garbage collection in the caches.</p>
<p>A new <strong>redis cache backend</strong> was integrated.</p>
<p>The <em>Variable</em> frontend now supports the <a href="http://opensource.dynamoid.com/">igbinary serializer</a> which speeds up serialization and unserialization of arrays and objects and leads to smaller cache data. The module will be used transparently, if it is available on the system.</p>
<p><strong>TypoScript</strong></p>
<p>Lots of stdWrap optimizations in all cObjects improve the performance of content rendering: The stdWrap method now processes only existing properties in a very small loop and returns fast if there is nothing to do. New additions of stdWrap also take care not to call the stdWrap function in vain (if no stdWrap property is set for example). Frontend rendering should be faster with improved flexibility!</p>
<p><strong>Database Access</strong></p>
<p>Some improvements were made on queries that expect just a single result row. This was achieved by replacing calls to <code>exec_SELECTgetRows</code> by the newly introduced <code>exec_SELECTgetSingleRow</code>.</p>
<p>SQL's “<code>FIND_IN_SET()</code>” (support in DBAL added in this release) is now being used throughout the core, speeding up many queries, for example listQuery() for checking the group list permissions.</p>
<h2 id="download">Download</h2>
<p><a href="https://typo3.org/download/" class="uri">https://typo3.org/download/</a></p>
<p><strong>MD5 checksums</strong></p>
<p><code>fccbf1d7a88a67998c802177b0d71030  dummy-4.5.0.tar.gz</code><br />
<code>b145561b055b2e48744a9c59e6d8e935  dummy-4.5.0.zip</code><br />
<code>b420f64f08f904f30e1affdb7e2a49cd  typo3_src+dummy-4.5.0.zip</code><br />
<code>3c71550910bb7337091d8d849e9fcf6c  typo3_src-4.5.0.tar.gz</code><br />
<code>b00c7b54a28d187066474ddb5cbd1ce8  typo3_src-4.5.0.zip</code><br />
<code>b941e53c4e47f440f7e31f58f5a8c08c  introductionpackage-4.5.0.tar.gz</code><br />
<code>b117ee4149bc6cd8367d18e926810f08  introductionpackage-4.5.0.zip</code></p>
<p><Category:ReleaseNotes/TYPO3_4.5.x> <a href="Category:TYPO3_4.5" title="wikilink">Category:TYPO3 4.5</a> <Category:2011></p>
